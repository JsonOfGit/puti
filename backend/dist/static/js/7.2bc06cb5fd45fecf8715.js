webpackJsonp([7],{"22fj":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("oCAU"),l={name:"mediaLiarary",data:function(){return{list:null,total:0,listLoading:!0,listQuery:{page:1,limit:24},dialogVisible:!1,dialogTitle:"File",detailForm:{id:void 0,title:"",slug:"",url:"",type:"",uploadTime:"",description:""}}},created:function(){this.getList(),this.setTitle()},methods:{setTitle:function(){document.title=this.$t("route."+this.$route.meta.title)+" | Puti"},getList:function(){var t=this;this.listLoading=!0,Object(a.b)(this.listQuery).then(function(e){t.list=e.data.mediaList,t.total=e.data.totalCount,t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleDelete:function(t){var e=this;this.$confirm(this.$t("media.checkToDeleteMedia")+this.$t("media.fileName")+":"+t.title,this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning",center:!0}).then(function(){Object(a.a)(t.id).then(function(i){if(0===i.code){e.$message({message:e.$t("common.deleteSucceeded"),type:"success",duration:3e3});var a=e.list.indexOf(t);e.list.splice(a,1)}else e.$message.error({message:e.$t("common.operationFailed")+i.message,duration:3e3})})}).catch(function(){e.$message({type:"info",message:e.$t("common.cancelDelete")})})},handleDetail:function(t){var e=this;Object(a.c)(t.id).then(function(i){0===i.code?(e.detailForm.id=i.data.id,e.detailForm.title=i.data.title,e.detailForm.slug=i.data.slug,e.detailForm.url=i.data.url,e.detailForm.type=i.data.type,e.detailForm.uploadTime=i.data.upload_time,e.detailForm.description=i.data.description,e.dialogVisible=!0,e.dialogTitle=t.title,e.dialogImgPreviewUrl=t.url):e.$message.error({message:e.$t("media.getDetailFailed")+i.message,duration:3e3})})}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}]},t._l(t.list,function(e){return i("el-col",{key:e.id,attrs:{xs:24,sm:8,md:4,xl:3}},[i("el-card",{staticClass:"media-card",attrs:{"body-style":{padding:"0px"}}},["picture"===e.type?i("img",{staticClass:"media-image",attrs:{src:e.url}}):i("div",{staticClass:"media-other-file",attrs:{icon:"el-icon-document"}},[i("svg-icon",{staticClass:"media-other-file-svg",attrs:{"icon-class":"article"}})],1),t._v(" "),i("div",{staticStyle:{padding:"8px",width:"100%"}},[i("el-button",{staticClass:"media-title",attrs:{type:"text"},on:{click:function(i){t.handleDetail(e)}}},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"media-bottom clearfix"},[i("time",{staticClass:"media-time"},[t._v(t._s(e.upload_time))]),t._v(" "),i("el-button",{staticClass:"media-button",on:{click:function(i){t.handleDelete(e)}}},[i("i",{staticClass:"el-icon-delete"})])],1)],1)])],1)})),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[16,24,32,40],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"media-detail-left",attrs:{xs:24,sm:24,md:15,xl:15}},["picture"==t.detailForm.type?i("div",{staticClass:"grid-content"},[i("img",{staticClass:"media-detail-image",attrs:{src:t.detailForm.url}})]):i("div",{staticClass:"grid-content"},[t._v("未知类型")])]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,md:9,xl:9}},[i("div",{staticClass:"grid-content"},[i("el-form",{attrs:{model:t.detailForm}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.detailForm.title,callback:function(e){t.$set(t.detailForm,"title",e)},expression:"detailForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"缩略名"}},[i("el-input",{model:{value:t.detailForm.slug,callback:function(e){t.$set(t.detailForm,"slug",e)},expression:"detailForm.slug"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"链接"}},[i("el-input",{attrs:{disabled:"disabled"},model:{value:t.detailForm.url,callback:function(e){t.$set(t.detailForm,"url",e)},expression:"detailForm.url"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入描述"},model:{value:t.detailForm.description,callback:function(e){t.$set(t.detailForm,"description",e)},expression:"detailForm.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"上传时间"}},[i("span",[t._v(t._s(t.detailForm.uploadTime))])]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("修改")])],1)],1)],1)])],1)],1)],1)},staticRenderFns:[]};var o=i("VU/8")(l,n,!1,function(t){i("eKYT")},null,null);e.default=o.exports},eKYT:function(t,e,i){var a=i("s4NF");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("77b122db",a,!0)},oCAU:function(t,e,i){"use strict";e.b=function(t){return Object(a.a)({url:"/media",method:"get",params:t})},e.c=function(t){return Object(a.a)({url:"/media/"+t,method:"get"})},e.a=function(t){return Object(a.a)({url:"/media/"+t,method:"delete"})};var a=i("vLgD")},s4NF:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n.media-card{\n  margin: 10px;\n}\n.media-title{\n  display: inline-block;\n  overflow: hidden;\n  text-overflow:ellipsis;\n  white-space: nowrap;\n  width:100%;\n  padding: 0;\n  text-align: left;\n}\n.media-time {\n  font-size: 13px;\n  color: #999;\n}\n.media-bottom {\n  margin-top: 13px;\n  line-height: 12px;\n}\n.media-button {\n  padding: 0;\n  float: right;\n  border: 0;\n  color: #F56C6C;\n}\n.media-button:hover {\n  color: rgb(255, 0, 0);\n  background-color: #fff;\n}\n.media-button:focus{\n  color: #fff;\n  background-color: rgb(255, 0, 0);\n}\n.media-image {\n  width: 100%;\n  height: 180px;\n  display: block;\n}\n.media-other-file{\n  width: 100%;\n  height: 180px;\n  display: block;\n}\n.media-other-file-svg{\n  display: block;\n  font-size: 140px;\n  margin: 0 auto;\n  padding-top: 40px;\n  color: #5B584A;\n  overflow: hidden;\n}\n.media-detail-image{\n  margin: 0 auto;\n  width: 100%;\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.clearfix:before,\n.clearfix:after {\n    display: table;\n    content: "";\n}\n.clearfix:after {\n    clear: both\n}\n',""])}});